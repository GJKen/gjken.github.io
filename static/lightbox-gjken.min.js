!function(){class t{constructor(t={}){this.options=Object.assign({animationDuration:300,closeOnOverlayClick:!0,onOpen:null,onClose:null,onNavigate:null},t),this.images=[],this.currentIndex=0,this.isOpen=!1,this.zoomLevel=1,this.touchStartX=0,this.touchEndX=0,this.wheelTimer=null,this.preloadedImages={},this.init()}init(){this.createStyles(),this.createLightbox(),this.bindEvents()}createStyles(){const t=document.createElement("style");t.textContent=`\n        .lb-lightbox-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background-color: transparent;\n          backdrop-filter: blur(5px);\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          opacity: 0;\n          transition: opacity ${this.options.animationDuration}ms ease;\n          pointer-events: none;\n          z-index: 10000;\n        }\n        .lb-lightbox-overlay.active {\n          pointer-events: auto;\n          opacity: 1;\n        }\n        .lb-lightbox-content-wrapper {\n          position: relative;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          width: 100%;\n          height: 100%;\n        }\n        .lb-lightbox-container {\n          width: 100%;\n          height: 100%;\n          position: relative;\n          transition: transform ${this.options.animationDuration}ms cubic-bezier(0.25, 0.1, 0.25, 1);\n          overflow: hidden;\n        }\n        .lb-lightbox-image-wrapper {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          height: 100%;\n          overflow: hidden;\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          z-index: 1;\n        }\n        .lb-lightbox-image {\n          max-width: 100%;\n          max-height: 100%;\n          height: auto;\n\t\t  user-select: none;\n\t\t  cursor: grab;\n          object-fit: contain;\n          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n          transition: transform ${this.options.animationDuration}ms cubic-bezier(0.25, 0.1, 0.25, 1), opacity ${this.options.animationDuration}ms ease;\n          opacity: 0;\n        }\n        .lb-lightbox-nav, .lb-lightbox-close {\n          position: absolute;\n          background-color: rgba(255, 255, 255, 0.8);\n          color: #333;\n          border: none;\n          border-radius: 50%;\n\t\t  user-select: none;\n          cursor: pointer;\n          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n          width: 50px;\n          height: 50px;\n          font-size: 30px;\n          z-index: 2;\n          transition: transform 0.2s ease;\n        }\n        .lb-lightbox-nav:hover {\n          transform: scale(1.1);\n        }\n        .lb-lightbox-prev {\n          left: 20px;\n          top: calc(50% - 25px);\n        }\n        .lb-lightbox-next {\n          right: 20px;\n          top: calc(50% - 25px);\n        }\n        .lb-lightbox-close {\n          top: 20px;\n          right: 20px;\n        }\n        @media (max-width: 768px) {\n          .lb-lightbox-nav, .lb-lightbox-close {\n            width: 40px;\n            height: 40px;\n            font-size: 20px;\n          }\n        }\n      `,document.head.appendChild(t)}createLightbox(){this.overlay=document.createElement("div"),this.overlay.className="lb-lightbox-overlay",this.contentWrapper=document.createElement("div"),this.contentWrapper.className="lb-lightbox-content-wrapper",this.container=document.createElement("div"),this.container.className="lb-lightbox-container",this.imageWrapper=document.createElement("div"),this.imageWrapper.className="lb-lightbox-image-wrapper",this.image=document.createElement("img"),this.image.className="lb-lightbox-image",this.prevButton=document.createElement("button"),this.prevButton.className="lb-lightbox-nav lb-lightbox-prev",this.prevButton.innerHTML="&#10094;",this.nextButton=document.createElement("button"),this.nextButton.className="lb-lightbox-nav lb-lightbox-next",this.nextButton.innerHTML="&#10095;",this.closeButton=document.createElement("button"),this.closeButton.className="lb-lightbox-close",this.closeButton.innerHTML="&times;",this.imageWrapper.appendChild(this.image),this.container.appendChild(this.imageWrapper),this.contentWrapper.appendChild(this.container),this.contentWrapper.appendChild(this.prevButton),this.contentWrapper.appendChild(this.nextButton),this.contentWrapper.appendChild(this.closeButton),this.overlay.appendChild(this.contentWrapper),document.body.appendChild(this.overlay),this.closeButton.addEventListener("click",this.close.bind(this))}bindEvents(){document.addEventListener("click",this.handleImageClick.bind(this),!0),this.overlay.addEventListener("click",this.handleOverlayClick.bind(this)),this.prevButton.addEventListener("click",this.showPreviousImage.bind(this)),this.nextButton.addEventListener("click",this.showNextImage.bind(this)),this.closeButton.addEventListener("click",this.close.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this)),this.overlay.addEventListener("wheel",this.handleWheel.bind(this)),this.overlay.addEventListener("touchstart",this.handleTouchStart.bind(this)),this.overlay.addEventListener("touchmove",this.handleTouchMove.bind(this)),this.overlay.addEventListener("touchend",this.handleTouchEnd.bind(this)),this.imageWrapper.addEventListener("click",this.close.bind(this))}handleImageClick(t){const e=t.target.closest("img");e&&!this.isOpen&&(t.preventDefault(),t.stopPropagation(),this.images=Array.from(document.querySelectorAll(".markdown-body img, table img")),this.currentIndex=this.images.indexOf(e),this.open())}handleOverlayClick(t){t.target===this.overlay&&this.options.closeOnOverlayClick&&this.close()}handleKeyDown(t){if(this.isOpen)switch(t.key){case"ArrowLeft":this.showPreviousImage();break;case"ArrowRight":this.showNextImage();break;case"Escape":this.close()}}handleWheel(t){t.preventDefault(),t.ctrlKey?(this.zoomLevel+=t.deltaY>0?-.1:.1,this.zoomLevel=Math.max(1,this.zoomLevel),this.image.style.transform=`scale(${this.zoomLevel})`):(clearTimeout(this.wheelTimer),this.wheelTimer=setTimeout(()=>{Math.sign(t.deltaY)>0?this.showNextImage():this.showPreviousImage()},50))}handleTouchStart(t){this.touchStartX=t.touches[0].clientX}handleTouchMove(t){this.touchEndX=t.touches[0].clientX}handleTouchEnd(){const t=this.touchStartX-this.touchEndX;Math.abs(t)>50&&(t>0?this.showNextImage():this.showPreviousImage())}open(){this.isOpen=!0,this.overlay.classList.add("active"),this.showImage(this.images[this.currentIndex].src),document.body.style.overflow="hidden","function"==typeof this.options.onOpen&&this.options.onOpen();let t=document.querySelector(".lb-lightbox-image");t.addEventListener("dragstart",function(t){t.preventDefault()}),t.addEventListener("click",function(t){t.stopPropagation()}),t.addEventListener("mousedown",function(e){const n=e.clientX,i=e.clientY,s=t.getBoundingClientRect(),o=window.getComputedStyle(t).transform,a="none"===o?1:parseFloat(o.split(",")[0].replace("matrix(",""));let h,r;function l(e){e.clientX,e.clientY;const n=e.clientX-h,i=e.clientY-r,s=window.innerWidth-t.offsetWidth,o=window.innerHeight-t.offsetHeight,a=Math.max(0,Math.min(n,s)),l=Math.max(0,Math.min(i,o));t.style.left=a+"px",t.style.top=l+"px"}1===a?(h=n-s.left,r=i-s.top):(h=(n-s.left)/a,r=(i-s.top)/a),t.style.position="absolute",document.addEventListener("mousemove",l),document.addEventListener("mouseup",function t(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",t)})})}close(){document.body.style.overflow="",this.overlay.classList.remove("active"),this.isOpen=!1,this.clearPreloadedImages(),"function"==typeof this.options.onClose&&this.options.onClose(),this.unbindEvents()}showPreviousImage(){this.currentIndex>0&&(this.currentIndex--,this.showImage(this.images[this.currentIndex].src),this.resetButtonScale(this.prevButton))}showNextImage(){this.currentIndex<this.images.length-1&&(this.currentIndex++,this.showImage(this.images[this.currentIndex].src),this.resetButtonScale(this.nextButton))}resetButtonScale(t){t.style.transform="scale(1.1)",setTimeout(()=>{t.style.transform="scale(1)"},200)}showImage(t){const e=new Image;e.src=t,e.onload=(()=>{this.image.style.transition=`opacity ${this.options.animationDuration}ms ease`,this.image.style.transform="scale(1)",this.image.src=t,this.image.style.opacity="1",this.preloadImages(),this.prevButton.style.display=0===this.currentIndex?"none":"block",this.nextButton.style.display=this.currentIndex===this.images.length-1?"none":"block"}),e.onerror=(()=>{console.error("Failed to load image:",t)})}preloadImages(){const t=this.currentIndex+1,e=this.currentIndex-1;t<this.images.length&&(this.preloadedImages[t]=new Image,this.preloadedImages[t].src=this.images[t].src),e>=0&&(this.preloadedImages[e]=new Image,this.preloadedImages[e].src=this.images[e].src)}clearPreloadedImages(){Object.keys(this.preloadedImages).forEach(t=>{this.preloadedImages[t].src=""}),this.preloadedImages={}}unbindEvents(){document.removeEventListener("click",this.handleImageClick.bind(this),!0),this.overlay.removeEventListener("click",this.handleOverlayClick.bind(this)),this.prevButton.removeEventListener("click",this.showPreviousImage.bind(this)),this.nextButton.removeEventListener("click",this.showNextImage.bind(this)),this.closeButton.removeEventListener("click",this.close.bind(this)),document.removeEventListener("keydown",this.handleKeyDown.bind(this)),this.overlay.removeEventListener("wheel",this.handleWheel.bind(this)),this.overlay.removeEventListener("touchstart",this.handleTouchStart.bind(this)),this.overlay.removeEventListener("touchmove",this.handleTouchMove.bind(this)),this.overlay.removeEventListener("touchend",this.handleTouchEnd.bind(this))}}window.Lightbox=t,document.addEventListener("DOMContentLoaded",()=>{new t})}();